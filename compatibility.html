<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Compatibility Calculator - Shivam ki Bipasha</title>
    <link rel="icon" type="image/png" href="asset/images/doggy/logo.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <div class="logo">Happy Birthday My Love</div>
                <button class="hamburger" id="hamburger" aria-label="Toggle menu">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
                <ul class="nav-links" id="nav-links">
                    <li><a href="index.html#home" class="nav-link">Home</a></li>
                    <li><a href="essence.html" class="nav-link">Essence</a></li>
                    <li><a href="index.html#about" class="nav-link">About</a></li>
                    <li><a href="index.html#whiteboard" class="nav-link">Whiteboard</a></li>
                    <li><a href="note.html" class="nav-link">Note</a></li>
                    <li><a href="games.html" class="nav-link">Games</a></li>
                    <li><a href="developers-note.html" class="nav-link">Developer's Note</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Compatibility Calculator Game -->
    <section class="section" style="min-height: 80vh; padding-top: 120px;">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Love Compatibility Calculator</h2>
                <div class="title-underline"></div>
                <p class="messages-description" style="margin-top: 20px;">Enter your names and dates of birth to discover your compatibility percentage!</p>
            </div>
            <div class="content-wrapper">
                <div class="compatibility-container">
                    <div class="compatibility-form-container" id="compatibility-form-container">
                        <h3 class="form-title">Enter Your Details</h3>
                        <form id="compatibility-form" class="message-form">
                            <div class="compatibility-row">
                                <div class="form-group">
                                    <label for="name1">First Person's Name:</label>
                                    <input type="text" id="name1" name="name1" placeholder="Enter first name" required maxlength="50">
                                </div>
                                <div class="form-group">
                                    <label for="dob1">Date of Birth:</label>
                                    <input type="date" id="dob1" name="dob1" required>
                                </div>
                            </div>
                            <div class="compatibility-row">
                                <div class="form-group">
                                    <label for="name2">Second Person's Name:</label>
                                    <input type="text" id="name2" name="name2" placeholder="Enter second name" required maxlength="50">
                                </div>
                                <div class="form-group">
                                    <label for="dob2">Date of Birth:</label>
                                    <input type="date" id="dob2" name="dob2" required>
                                </div>
                            </div>
                            <button type="submit" class="submit-btn compatibility-btn" id="calculate-btn">
                                <span class="btn-text">Calculate Compatibility</span>
                                <span class="btn-loading" style="display: none;">Calculating...</span>
                            </button>
                        </form>
                    </div>
                    <div class="compatibility-result" id="compatibility-result" style="display: none;">
                        <div class="result-content">
                            <h3 class="result-title">Compatibility Result</h3>
                            <div class="compatibility-names">
                                <span id="result-name1"></span>
                                <span class="heart-icon">&</span>
                                <span id="result-name2"></span>
                            </div>
                            <div class="compatibility-percentage-container">
                                <div class="percentage-circle">
                                    <svg class="progress-ring" width="200" height="200">
                                        <circle class="progress-ring-circle-bg" cx="100" cy="100" r="90"></circle>
                                        <circle class="progress-ring-circle" cx="100" cy="100" r="90" id="progress-circle"></circle>
                                    </svg>
                                    <div class="percentage-text">
                                        <span id="compatibility-percentage">0</span>%
                                    </div>
                                </div>
                            </div>
                            <div class="compatibility-message" id="compatibility-message"></div>
                            <div class="compatibility-details" id="compatibility-details"></div>
                            <button class="submit-btn compatibility-btn" id="try-again-btn" style="margin-top: 30px;">
                                Try Again
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <style>
        .compatibility-container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--bg-white);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            animation: fadeInUp 0.6s ease-out;
        }

        .compatibility-form-container {
            width: 100%;
        }

        .compatibility-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .compatibility-btn {
            width: 100%;
            padding: 16px 32px;
            font-size: 1.1rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .compatibility-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.4);
        }

        .compatibility-result {
            text-align: center;
            animation: fadeInUp 0.6s ease-out;
        }

        .result-title {
            font-size: 2rem;
            color: var(--text-dark);
            margin-bottom: 20px;
        }

        .compatibility-names {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 30px;
        }

        .heart-icon {
            font-size: 1.5rem;
            animation: heartbeat 1.5s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .compatibility-percentage-container {
            display: flex;
            justify-content: center;
            margin: 40px 0;
        }

        .percentage-circle {
            position: relative;
            width: 200px;
            height: 200px;
        }

        .progress-ring {
            transform: rotate(-90deg);
        }

        .progress-ring-circle-bg {
            fill: none;
            stroke: #e0e0e0;
            stroke-width: 12;
        }

        .progress-ring-circle {
            fill: none;
            stroke: var(--primary-color);
            stroke-width: 12;
            stroke-linecap: round;
            stroke-dasharray: 565.48;
            stroke-dashoffset: 565.48;
            transition: stroke-dashoffset 2s ease-in-out;
        }

        .percentage-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .compatibility-message {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-dark);
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(196, 69, 105, 0.1));
            border-radius: 15px;
        }

        .compatibility-details {
            text-align: left;
            background: var(--bg-light);
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .compatibility-details h4 {
            color: var(--text-dark);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .compatibility-details p {
            color: var(--text-light);
            margin-bottom: 10px;
            line-height: 1.8;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .compatibility-container {
                padding: 25px;
            }

            .compatibility-row {
                grid-template-columns: 1fr;
            }

            .percentage-circle {
                width: 150px;
                height: 150px;
            }

            .percentage-text {
                font-size: 2rem;
            }

            .result-title {
                font-size: 1.5rem;
            }

            .compatibility-names {
                font-size: 1.1rem;
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('compatibility-form');
            const formContainer = document.getElementById('compatibility-form-container');
            const resultContainer = document.getElementById('compatibility-result');
            const tryAgainBtn = document.getElementById('try-again-btn');

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                calculateCompatibility();
            });

            tryAgainBtn.addEventListener('click', function() {
                formContainer.style.display = 'block';
                resultContainer.style.display = 'none';
                form.reset();
            });

            function calculateCompatibility() {
                const name1 = document.getElementById('name1').value.trim();
                const name2 = document.getElementById('name2').value.trim();
                const dob1 = new Date(document.getElementById('dob1').value);
                const dob2 = new Date(document.getElementById('dob2').value);

                // Calculate compatibility
                const compatibility = calculateCompatibilityScore(name1, name2, dob1, dob2);

                // Show result
                document.getElementById('result-name1').textContent = name1;
                document.getElementById('result-name2').textContent = name2;
                
                // Animate percentage
                animatePercentage(compatibility.percentage);
                
                // Show message
                document.getElementById('compatibility-message').textContent = compatibility.message;
                
                // Show details
                const detailsHtml = `
                    <h4>Compatibility Breakdown:</h4>
                    <p><strong>Name Compatibility:</strong> ${compatibility.nameScore}%</p>
                    <p><strong>Date Compatibility:</strong> ${compatibility.dateScore}%</p>
                    <p><strong>Zodiac Compatibility:</strong> ${compatibility.zodiacScore}%</p>
                    <p><strong>Age Difference Factor:</strong> ${compatibility.ageFactor}%</p>
                    ${compatibility.funFact ? `<p style="margin-top: 15px; font-style: italic; color: var(--primary-color);">${compatibility.funFact}</p>` : ''}
                `;
                document.getElementById('compatibility-details').innerHTML = detailsHtml;

                // Hide form and show result
                formContainer.style.display = 'none';
                resultContainer.style.display = 'block';
            }

            function calculateCompatibilityScore(name1, name2, dob1, dob2) {
                // Special case: Bipasha and Shivam are made for each other!
                const name1Lower = name1.toLowerCase().trim();
                const name2Lower = name2.toLowerCase().trim();
                
                if ((name1Lower === 'bipasha' && name2Lower === 'shivam') || 
                    (name1Lower === 'shivam' && name2Lower === 'bipasha')) {
                    return {
                        percentage: 100,
                        message: "Made for Each Other",
                        nameScore: 100,
                        dateScore: 100,
                        zodiacScore: 100,
                        ageFactor: 100,
                        funFact: "You two are soulmates! This is destiny!"
                    };
                }
                
                // Name compatibility (30% weight)
                const nameScore = calculateNameCompatibility(name1, name2);
                
                // Date compatibility (25% weight)
                const dateScore = calculateDateCompatibility(dob1, dob2);
                
                // Zodiac compatibility (25% weight)
                const zodiacScore = calculateZodiacCompatibility(dob1, dob2);
                
                // Age difference factor (20% weight)
                const ageFactor = calculateAgeFactor(dob1, dob2);
                
                // Calculate weighted average
                const totalPercentage = Math.round(
                    (nameScore * 0.30) +
                    (dateScore * 0.25) +
                    (zodiacScore * 0.25) +
                    (ageFactor * 0.20)
                );
                
                // Ensure percentage is between 50-100 (always positive!)
                const finalPercentage = Math.max(50, Math.min(100, totalPercentage));
                
                // Get message based on percentage
                const message = getCompatibilityMessage(finalPercentage);
                
                // Get fun fact
                const funFact = getFunFact(name1, name2, dob1, dob2, finalPercentage);
                
                return {
                    percentage: finalPercentage,
                    message: message,
                    nameScore: nameScore,
                    dateScore: dateScore,
                    zodiacScore: zodiacScore,
                    ageFactor: ageFactor,
                    funFact: funFact
                };
            }

            function calculateNameCompatibility(name1, name2) {
                const n1 = name1.toLowerCase();
                const n2 = name2.toLowerCase();
                
                // Check for common letters
                let commonLetters = 0;
                const letters1 = {};
                const letters2 = {};
                
                for (let char of n1) {
                    if (char.match(/[a-z]/)) {
                        letters1[char] = (letters1[char] || 0) + 1;
                    }
                }
                
                for (let char of n2) {
                    if (char.match(/[a-z]/)) {
                        letters2[char] = (letters2[char] || 0) + 1;
                    }
                }
                
                for (let char in letters1) {
                    if (letters2[char]) {
                        commonLetters += Math.min(letters1[char], letters2[char]);
                    }
                }
                
                // Length similarity
                const lengthDiff = Math.abs(n1.length - n2.length);
                const maxLength = Math.max(n1.length, n2.length);
                const lengthSimilarity = ((maxLength - lengthDiff) / maxLength) * 100;
                
                // First letter match bonus
                const firstLetterMatch = n1[0] === n2[0] ? 10 : 0;
                
                // Calculate score (0-100)
                const totalLetters = n1.length + n2.length;
                const letterScore = totalLetters > 0 ? (commonLetters / totalLetters) * 100 : 50;
                
                return Math.min(100, Math.round((letterScore * 0.6) + (lengthSimilarity * 0.3) + firstLetterMatch));
            }

            function calculateDateCompatibility(dob1, dob2) {
                // Day of month compatibility
                const day1 = dob1.getDate();
                const day2 = dob2.getDate();
                const dayDiff = Math.abs(day1 - day2);
                const dayScore = Math.max(0, 100 - (dayDiff * 3));
                
                // Month compatibility
                const month1 = dob1.getMonth();
                const month2 = dob2.getMonth();
                const monthDiff = Math.abs(month1 - month2);
                const monthScore = monthDiff === 0 ? 100 : Math.max(0, 100 - (monthDiff * 8));
                
                // Day of week compatibility
                const dayOfWeek1 = dob1.getDay();
                const dayOfWeek2 = dob2.getDay();
                const dayOfWeekScore = dayOfWeek1 === dayOfWeek2 ? 100 : 70;
                
                return Math.round((dayScore * 0.4) + (monthScore * 0.4) + (dayOfWeekScore * 0.2));
            }

            function calculateZodiacCompatibility(dob1, dob2) {
                const zodiac1 = getZodiacSign(dob1);
                const zodiac2 = getZodiacSign(dob2);
                
                // Zodiac compatibility matrix (simplified)
                const compatibilityMatrix = {
                    'Aries': { 'Aries': 85, 'Leo': 90, 'Sagittarius': 88, 'Gemini': 75, 'Aquarius': 80 },
                    'Taurus': { 'Taurus': 85, 'Virgo': 90, 'Capricorn': 88, 'Cancer': 75, 'Pisces': 80 },
                    'Gemini': { 'Gemini': 85, 'Libra': 90, 'Aquarius': 88, 'Aries': 75, 'Leo': 80 },
                    'Cancer': { 'Cancer': 85, 'Scorpio': 90, 'Pisces': 88, 'Taurus': 75, 'Virgo': 80 },
                    'Leo': { 'Leo': 85, 'Sagittarius': 90, 'Aries': 88, 'Gemini': 75, 'Libra': 80 },
                    'Virgo': { 'Virgo': 85, 'Capricorn': 90, 'Taurus': 88, 'Cancer': 75, 'Scorpio': 80 },
                    'Libra': { 'Libra': 85, 'Aquarius': 90, 'Gemini': 88, 'Leo': 75, 'Sagittarius': 80 },
                    'Scorpio': { 'Scorpio': 85, 'Pisces': 90, 'Cancer': 88, 'Virgo': 75, 'Capricorn': 80 },
                    'Sagittarius': { 'Sagittarius': 85, 'Aries': 90, 'Leo': 88, 'Libra': 75, 'Aquarius': 80 },
                    'Capricorn': { 'Capricorn': 85, 'Taurus': 90, 'Virgo': 88, 'Scorpio': 75, 'Pisces': 80 },
                    'Aquarius': { 'Aquarius': 85, 'Gemini': 90, 'Libra': 88, 'Aries': 75, 'Sagittarius': 80 },
                    'Pisces': { 'Pisces': 85, 'Cancer': 90, 'Scorpio': 88, 'Taurus': 75, 'Capricorn': 80 }
                };
                
                const score = compatibilityMatrix[zodiac1]?.[zodiac2] || 70;
                return score;
            }

            function getZodiacSign(date) {
                const month = date.getMonth() + 1;
                const day = date.getDate();
                
                if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return 'Aries';
                if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) return 'Taurus';
                if ((month === 5 && day >= 21) || (month === 6 && day <= 20)) return 'Gemini';
                if ((month === 6 && day >= 21) || (month === 7 && day <= 22)) return 'Cancer';
                if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) return 'Leo';
                if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) return 'Virgo';
                if ((month === 9 && day >= 23) || (month === 10 && day <= 22)) return 'Libra';
                if ((month === 10 && day >= 23) || (month === 11 && day <= 21)) return 'Scorpio';
                if ((month === 11 && day >= 22) || (month === 12 && day <= 21)) return 'Sagittarius';
                if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return 'Capricorn';
                if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) return 'Aquarius';
                return 'Pisces';
            }

            function calculateAgeFactor(dob1, dob2) {
                const age1 = new Date().getFullYear() - dob1.getFullYear();
                const age2 = new Date().getFullYear() - dob2.getFullYear();
                const ageDiff = Math.abs(age1 - age2);
                
                // Smaller age difference = higher score
                if (ageDiff === 0) return 100;
                if (ageDiff <= 2) return 95;
                if (ageDiff <= 5) return 85;
                if (ageDiff <= 10) return 75;
                if (ageDiff <= 15) return 65;
                return 55;
            }

            function getCompatibilityMessage(percentage) {
                if (percentage >= 90) return "Perfect Match! You two are meant to be!";
                if (percentage >= 80) return "Excellent Compatibility! A beautiful connection!";
                if (percentage >= 70) return "Great Match! You complement each other well!";
                if (percentage >= 60) return "Good Compatibility! There's potential here!";
                return "Decent Match! With effort, you can make it work!";
            }

            function getFunFact(name1, name2, dob1, dob2, percentage) {
                const facts = [
                    `Your names share ${countCommonLetters(name1, name2)} common letters!`,
                    `You were born ${Math.abs(dob1.getMonth() - dob2.getMonth())} months apart!`,
                    `Your combined name length is ${name1.length + name2.length} letters!`,
                    `The age difference between you is ${Math.abs(new Date().getFullYear() - dob1.getFullYear() - (new Date().getFullYear() - dob2.getFullYear()))} years!`,
                    `Your zodiac signs are ${getZodiacSign(dob1)} and ${getZodiacSign(dob2)}!`
                ];
                return facts[Math.floor(Math.random() * facts.length)];
            }

            function countCommonLetters(name1, name2) {
                const set1 = new Set(name1.toLowerCase().replace(/[^a-z]/g, ''));
                const set2 = new Set(name2.toLowerCase().replace(/[^a-z]/g, ''));
                let count = 0;
                for (let char of set1) {
                    if (set2.has(char)) count++;
                }
                return count;
            }

            function animatePercentage(targetPercentage) {
                const circle = document.getElementById('progress-circle');
                const percentageText = document.getElementById('compatibility-percentage');
                const circumference = 2 * Math.PI * 90;
                
                let currentPercentage = 0;
                const increment = targetPercentage / 50;
                
                const interval = setInterval(() => {
                    currentPercentage += increment;
                    if (currentPercentage >= targetPercentage) {
                        currentPercentage = targetPercentage;
                        clearInterval(interval);
                    }
                    
                    const offset = circumference - (currentPercentage / 100) * circumference;
                    circle.style.strokeDashoffset = offset;
                    percentageText.textContent = Math.round(currentPercentage);
                }, 40);
            }
        });
    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p class="footer-text">Made with love for Bipasha</p>
            <p class="footer-date" id="footer-date">Happy Birthday!</p>
            <p class="footer-time" id="footer-time"></p>
            <p class="footer-copyright">&copy; 2024 Shivam ki Bipasha. All rights reserved.</p>
            <p style="margin-top: 15px;"><a href="developers-note.html" style="color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.9rem;">Developer's Note</a></p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>

